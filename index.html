<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHOBOS SHADOWS - PROTOCOL 1</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="scanline"></div>
    <div class="container">
        <h1 class="flicker">PHOBOS SHADOWS</h1>
        <p>Security protocol activated. Click the message. Good luck.</p>
        
        <div id="encrypted-box">
            <div id="encrypted-text" data-decrypted-word="TnpZeFJGTTc=">Loading data...</div>
        </div>

        <div class="input-area" id="verification-area" style="display: none;">
            <input type="text" id="key-input" placeholder="ENTER REVEALED KEY...">
            <button id="verify-button">AUTHENTICATE</button>
        </div>

        <p id="feedback-message" style="opacity: 0.5; min-height: 24px;"></p>

        <div id="next-challenge" style="display: none;">
            <p>Note it</p>
            <a href="puzzlexjdhdyeueieldlfkf8eiek3m3m390191je.html" class="button-link">Next</a>
        </div>

        <div class="footer">
            <p>LEVEL CLEAREANCE: O5</p>
        </div>
    </div>

    <script>
       
        (() => {
            
            const DECRYPTED_WORD = atob(document.getElementById('encrypted-text').dataset.decryptedWord);

           
            const antiCheat = () => {
                
                debugger;
            };

            let antiCheatInterval = setInterval(antiCheat, 1000);

            const encryptedTextElement = document.getElementById('encrypted-text');
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*&%$#@!';
            let intervalId = null;
            let isDecrypting = false;

            const verificationArea = document.getElementById('verification-area');
            const keyInput = document.getElementById('key-input');
            const verifyButton = document.getElementById('verify-button');
            const feedbackMessage = document.getElementById('feedback-message');
            const nextChallenge = document.getElementById('next-challenge');

            const startScramble = () => {
                if (isDecrypting) return;
                let scrambleCount = 0;
                intervalId = setInterval(() => {
                    let scrambledText = '';
                    for (let i = 0; i < DECRYPTED_WORD.length; i++) {
                        scrambledText += alphabet[Math.floor(Math.random() * alphabet.length)];
                    }
                    encryptedTextElement.textContent = scrambledText;
                    scrambleCount++;
                    if (scrambleCount > 50 && !isDecrypting) {
                        encryptedTextElement.textContent = 'â– '.repeat(DECRYPTED_WORD.length);
                        clearInterval(intervalId);
                    }
                }, 100);
            };

            const decryptText = () => {
                if (isDecrypting) return;
                isDecrypting = true;
                clearInterval(intervalId);

                let iteration = 0;
                
                const interval = setInterval(() => {
                    encryptedTextElement.textContent = DECRYPTED_WORD.split('')
                        .map((letter, index) => (index < iteration) ? DECRYPTED_WORD[index] : alphabet[Math.floor(Math.random() * alphabet.length)])
                        .join('');

                    if (iteration >= DECRYPTED_WORD.length) {
                        clearInterval(interval);
                        encryptedTextElement.textContent = DECRYPTED_WORD;
                        encryptedTextElement.classList.add('decrypted');
                        encryptedTextElement.style.cursor = 'default';
                        verificationArea.style.display = 'block';
                    }
                    iteration += 1 / 3;
                }, 50);
            };

            const verifyKey = () => {
                if (keyInput.value === DECRYPTED_WORD) {
                    feedbackMessage.textContent = "AUTHENTICATION SUCCESSFUL";
                    feedbackMessage.style.color = "#0f0";
                    verificationArea.style.display = 'none';
                    nextChallenge.style.display = 'block';
                    clearInterval(antiCheatInterval);
                } else {
                    feedbackMessage.textContent = "AUTHENTICATION FAILED. Sequence mismatch.";
                    feedbackMessage.style.color = "var(--primary-color)";
                    keyInput.value = "";
                }
            };

            encryptedTextElement.addEventListener('click', decryptText);
            verifyButton.addEventListener('click', verifyKey);
            keyInput.addEventListener('keyup', (event) => {
                if (event.key === "Enter") verifyKey();
            });

            startScramble();
        })();
    </script>
</body>
</html>